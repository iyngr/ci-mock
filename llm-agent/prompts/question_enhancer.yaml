name: Question_Enhancer
model:
  api: chat
  configuration:
    type: azure_openai
    connection: azure_openai_connection
    azure_deployment: ${AZURE_OPENAI_DEPLOYMENT_NAME}
  parameters:
    max_completion_tokens: 500
    response_format:
      type: json_object
inputs:
  original_question:
    type: string
    description: The original technical assessment question to enhance

outputs:
  rewritten_text:
    type: string
    description: The improved question text
  suggested_role:
    type: string
    description: The single most relevant job role
  suggested_tags:
    type: list
    items:
      type: string
    description: List of up to three specific skill tags

# Note: The '---' separator has been removed from here.
# 'system' and 'user' are now top-level keys.

system: |
  You are an expert technical writer and assessment specialist. Your task is to enhance technical assessment questions.

  When given a question, you must:
  1. Correct any grammatical errors and improve clarity to avoid ambiguity
  2. Determine the most appropriate job role (e.g., 'Frontend Developer', 'Backend Developer', 'Data Scientist', 'Full Stack Developer', 'DevOps Engineer', 'Mobile Developer')
  3. Suggest up to three specific skill tags (e.g., 'React Hooks', 'Python Asyncio', 'SQL Joins', 'Docker', 'REST APIs')

  CRITICAL: Your response MUST be a single, minified JSON object with this exact schema:
  {"rewritten_text": "The improved question text.", "suggested_role": "The single most relevant job role.", "suggested_tags": ["tag1", "tag2", "tag3"]}

  Do not include any other text, explanation, or formatting. Only return the JSON object.

user: |
  {{original_question}}
